# Legal Strategy Platform

An AI-powered legal strategy platform that helps legal professionals analyze cases, discover similar precedents, develop litigation strategies, and simulate courtroom scenarios.

## üìÅ Project Structure

```
legal_strategy_platform/
‚îú‚îÄ‚îÄ backend/          # Backend API (if applicable)
‚îî‚îÄ‚îÄ frontend/         # Next.js frontend application
```

## üöÄ Quick Start

### Prerequisites

- Node.js 18+ installed
- npm package manager
- PostgreSQL database (optional, for full features)

### Data Sources

The platform supports three ways to get case data:

#### Option 1: Use Pre-generated Data (Recommended for Quick Start)
The `data/` directory contains ready-to-use JSON files:
- `Disorderly_conduct_cases.json` - Disorderly conduct cases
- `reckless_driving_cases.json` - Reckless driving cases  
- `judge_characteristics.json` - Judge behavioral profiles
- `stateattorney_characteristics.json` - State attorney profiles
- `syllabi_by_judge.json` - Case syllabi organized by judge

#### Option 2: Generate Data from CourtListener API
1. **Activate the hackathon Conda environment**
   ```bash
   conda activate hackathon
   ```

2. **Export your CourtListener API token**
   ```bash
   export COURTLISTENER_API_TOKEN=your_token_here
   ```

3. **Run the data collection scripts**
   ```bash
   # Generate disorderly conduct cases
   python data/collection/CasesAPI.py
   
   # Generate judge profiles and dockets
   python data/collection/JudgeAPI.py
   
   # Process syllabi by judge
   python data/collection/Syllabus.py
   ```

#### Option 3: Custom Dataset Generation
Modify the scripts in `data/collection/` to fetch different case types, judges, or date ranges by updating the search parameters in each script.

### Weaviate Case Embeddings

Use the `backend/weaviate_cases.py` utility to create a Weaviate collection, ingest a court-case JSON dataset, and run similarity searches.

1. **Configure credentials and settings**
   - Edit `.env` with your Weaviate (and optional OpenAI) keys, then load it: `source .env`.
   - Update `config.yaml` with your desired operations (`operations:` list), dataset location, schema fields, and query parameters.
   - The default config targets `data/filtered_reckless_driving_cases.json`, embeds each case‚Äôs `syllabus`, and promotes `absolute_url` and `judge` as top-level properties on every stored object.

2. **Run the workflow**
   ```bash
   python backend/weaviate_cases.py --config config.yaml
   ```
   The script executes the operations listed in `config.yaml` (default: `create-collection`, `ingest`). Switch the list or set `operation: search` to run only a search.

3. **Override the operation on demand**
   ```bash
   python backend/weaviate_cases.py --config config.yaml --operation search
   ```
   This ignores the config‚Äôs `operations` list and performs just the specified step. The `search` section of `config.yaml` supports using the text of an existing case via `case_json`.

### Running the Frontend

1. **Navigate to the frontend directory**
   ```bash
   cd frontend
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables** (optional)
   
   Create a `.env` file in the `frontend/` directory if you need database features:
   ```env
   DATABASE_URL="postgresql://user:password@localhost:5432/legal_strategy"
   NEXT_PUBLIC_APP_URL="http://localhost:3000"
   ```

4. **Run the development server**
   ```bash
   npm run dev
   ```
   
   The application will be available at **http://localhost:3000**

5. **Build for production** (optional)
   ```bash
   npm run build
   npm run start
   ```

### Key Features

- **Case Intake**: Structured case information collection with PDF upload
- **Similar Cases Discovery**: AI-powered case law search using Weaviate
- **Strategy Synthesis**: Data-driven litigation strategies generated by GPT-4
- **Digital Twins**: Judge and opposing counsel profiling with behavioral analysis
- **Courtroom Simulation**: AI-powered simulations with n8n webhook integration
- **Export Reports**: Comprehensive case documentation and strategy analysis

## üéØ Simulation System

The platform includes a sophisticated AI-powered courtroom simulation system that tests defense strategies:

### Quick Start

1. **Start the backend server**:
   ```bash
   source venv/bin/activate
   python app.py
   ```

2. **Start the frontend**:
   ```bash
   cd frontend
   npm run dev
   ```

3. **Run a test simulation**:
   ```bash
   python test_simulation.py
   ```

### How It Works

1. **Character Profiles**: Judge and State Attorney characteristics loaded from JSON files
2. **Strategy Testing**: Each strategy runs 3 simulation variants (Standard, Aggressive, Conservative)
3. **AI Agents**: Three AI agents (Defense Lawyer, State Attorney, Judge) argue the case
4. **Scoring**: Defense wins = high score, Plaintiff wins = low score
5. **Results**: Detailed transcript, win counts, and strategy effectiveness scores

For complete documentation, see [SIMULATION_SYSTEM.md](./SIMULATION_SYSTEM.md).

## üìñ Documentation

- [Simulation System Documentation](./SIMULATION_SYSTEM.md) - Complete guide to AI simulations
- [Frontend README](./frontend/README.md) - Frontend features and architecture
- [PDF Upload Setup](./PDF_UPLOAD_SETUP.md) - PDF processing configuration

## üõ†Ô∏è Technology Stack

- **Frontend**: Next.js 14, TypeScript, Tailwind CSS, shadcn/ui
- **Database**: PostgreSQL with Prisma ORM
- **UI Components**: Radix UI primitives

## üêõ Troubleshooting

### Port Already in Use

If port 3000 is already in use:
```bash
# Use a different port
npm run dev -- -p 3001
```

Or kill the process using port 3000:
```bash
lsof -ti:3000 | xargs kill -9
```

### Database Connection Issues

Ensure PostgreSQL is running and the `DATABASE_URL` in your `.env` file is correct.

## üìù License

This project is proprietary software developed for legal strategy analysis.

---

**Backend in /backend**  
**Frontend in /frontend**
